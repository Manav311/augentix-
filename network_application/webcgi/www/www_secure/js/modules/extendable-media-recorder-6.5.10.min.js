"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e,t,n,r,o,a,s,i,u,l,c,d={exports:{}};e=d.exports,t=function(e){return function(t){var n=e(t);return t.add(n),n}},n=function(e){return function(t,n){return e.set(t,n),n}},r=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,a=2*(o=536870912),s=function(e,t){return function(n){var s=t.get(n),i=void 0===s?n.size:s<a?s+1:0;if(!n.has(i))return e(n,i);if(n.size<o){for(;n.has(i);)i=Math.floor(Math.random()*a);return e(n,i)}if(n.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(i);)i=Math.floor(Math.random()*r);return e(n,i)}},i=new WeakMap,u=n(i),l=s(u,i),c=t(l),e.addUniqueNumber=c,e.generateUniqueNumber=l,Object.defineProperty(e,"__esModule",{value:!0});const f=new WeakMap,p=new WeakMap,h=new Set,m=(e=>{const t=(n=e,{...n,connect:({call:e})=>async()=>{const{port1:t,port2:n}=new MessageChannel,r=await e("connect",{port:t},[t]);return f.set(n,r),n},disconnect:({call:e})=>async t=>{const n=f.get(t);if(void 0===n)throw new Error("The given port is not connected.");await e("disconnect",{portId:n})},isSupported:({call:e})=>()=>e("isSupported")});var n;return e=>{const n=(e=>{if(p.has(e))return p.get(e);const t=new Map;return p.set(e,t),t})(e);e.addEventListener("message",(({data:e})=>{const{id:t}=e;if(null!==t&&n.has(t)){const{reject:r,resolve:o}=n.get(t);n.delete(t),void 0===e.error?o(e.result):r(new Error(e.error.message))}})),(e=>"function"==typeof e.start)(e)&&e.start();const r=(t,r=null,o=[])=>new Promise(((a,s)=>{const i=d.exports.generateUniqueNumber(n);n.set(i,{reject:s,resolve:a}),null===r?e.postMessage({id:i,method:t},o):e.postMessage({id:i,method:t,params:r},o)})),o=(t,n,r=[])=>{e.postMessage({id:null,method:t,params:n},r)};let a={};for(const[e,n]of Object.entries(t))a={...a,[e]:n({call:r,notify:o})};return{...a}}})({encode:({call:e})=>async(t,n)=>{const r=await e("encode",{encoderId:t,timeslice:n});return h.delete(t),r},instantiate:({call:e})=>async(t,n)=>{const r=d.exports.addUniqueNumber(h);return{encoderId:r,port:await e("instantiate",{encoderId:r,mimeType:t,sampleRate:n})}},register:({call:e})=>t=>e("register",{port:t},[t])}),v=new Blob(['(()=>{var e={834:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0},640:(e,t,r)=>{var n=r(834);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0},942:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},841:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},545:(e,t,r)=>{var n=r(640),o=r(942),a=r(798),s=r(841);e.exports=function(e){return n(e)||o(e)||a(e)||s()},e.exports.default=e.exports,e.exports.__esModule=!0},798:(e,t,r)=>{var n=r(834);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},775:function(e,t,r){!function(e,t,r,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(t),s=o(r),i=o(n),c=function(e,t){return void 0===t?e:t.reduce((function(e,t){if("capitalize"===t){var r=e.charAt(0).toUpperCase(),n=e.slice(1);return"".concat(r).concat(n)}return"dashify"===t?s.default(e):"prependIndefiniteArticle"===t?"".concat(i.default(e)," ").concat(e):e}),e)},u=function(e){var t=e.name+e.modifiers.map((function(e){return"\\\\.".concat(e,"\\\\(\\\\)")})).join("");return new RegExp("\\\\$\\\\{".concat(t,"}"),"g")},l=function(e,t){for(var r=/\\${([^.}]+)((\\.[^(]+\\(\\))*)}/g,n=[],o=r.exec(e);null!==o;){var s={modifiers:[],name:o[1]};if(void 0!==o[3])for(var i=/\\.[^(]+\\(\\)/g,l=i.exec(o[2]);null!==l;)s.modifiers.push(l[0].slice(1,-2)),l=i.exec(o[2]);n.push(s),o=r.exec(e)}var d=n.reduce((function(e,r){return e.map((function(e){return"string"==typeof e?e.split(u(r)).reduce((function(e,n,o){return 0===o?[n]:r.name in t?[].concat(a.default(e),[c(t[r.name],r.modifiers),n]):[].concat(a.default(e),[function(e){return c(e[r.name],r.modifiers)},n])}),[]):[e]})).reduce((function(e,t){return[].concat(a.default(e),a.default(t))}),[])}),[e]);return function(e){return d.reduce((function(t,r){return[].concat(a.default(t),"string"==typeof r?[r]:[r(e)])}),[]).join("")}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0===e.code?void 0:l(e.code,t),n=void 0===e.message?void 0:l(e.message,t);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=void 0===o&&(t instanceof Error||void 0!==t.code&&"Exception"===t.code.slice(-9))?{cause:t,missingParameters:{}}:{cause:o,missingParameters:t},s=a.cause,i=a.missingParameters,c=void 0===n?new Error:new Error(n(i));return null!==s&&(c.cause=s),void 0!==r&&(c.code=r(i)),void 0!==e.status&&(c.status=e.status),c}return o};e.compile=d,Object.defineProperty(e,"__esModule",{value:!0})}(t,r(545),r(881),r(507))},881:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e)throw new TypeError("expected a string");return e.trim().replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\\W/g,(e=>/[À-ž]/.test(e)?e:"-")).replace(/^-+|-+$/g,"").replace(/-{2,}/g,(e=>t&&t.condense?"-":e)).toLowerCase()}},107:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,a=2*o,s=function(e,t){return function(r){var s=t.get(r),i=void 0===s?r.size:s<a?s+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*a);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),u=s(c,i),l=t(u);e.addUniqueNumber=l,e.generateUniqueNumber=u,Object.defineProperty(e,"__esModule",{value:!0})}(t)},507:e=>{var t=function(e){var t,r,n=/\\w+/.exec(e);if(!n)return"an";var o=(r=n[0]).toLowerCase(),a=["honest","hour","hono"];for(t in a)if(0==o.indexOf(a[t]))return"an";if(1==o.length)return"aedhilmnorsx".indexOf(o)>=0?"an":"a";if(r.match(/(?!FJO|[HLMNS]Y.|RY[EO]|SQU|(F[LR]?|[HL]|MN?|N|RH?|S[CHKLMNPTVW]?|X(YL)?)[AEIOU])[FHLMNRSX][A-Z]/))return"an";var s=[/^e[uw]/,/^onc?e\\b/,/^uni([^nmd]|mo)/,/^u[bcfhjkqrst][aeiou]/];for(t=0;t<s.length;t++)if(o.match(s[t]))return"a";return r.match(/^U[NK][AIEO]/)?"a":r==r.toUpperCase()?"aedhilmnorsx".indexOf(o[0])>=0?"an":"a":"aeiou".indexOf(o[0])>=0||o.match(/^y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)/)?"an":"a"};void 0!==e.exports?e.exports=t:window.indefiniteArticle=t}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(()=>{"use strict";var e=r(775);const t=-32603,n=-32602,o=-32601,a=(0,e.compile)({message:\'The requested method called "${method}" is not supported.\',status:o}),s=(0,e.compile)({message:\'The handler of the method called "${method}" returned no required result.\',status:t}),i=(0,e.compile)({message:\'The handler of the method called "${method}" returned an unexpected result.\',status:t}),c=(0,e.compile)({message:\'The specified parameter called "portId" with the given value "${portId}" does not identify a port connected to this worker.\',status:n}),u=(e,t)=>async r=>{let{data:{id:n,method:o,params:c}}=r;const u=t[o];try{if(void 0===u)throw a({method:o});const t=void 0===c?u():u(c);if(void 0===t)throw s({method:o});const r=t instanceof Promise?await t:t;if(null===n){if(void 0!==r.result)throw i({method:o})}else{if(void 0===r.result)throw i({method:o});const{result:t,transferables:a=[]}=r;e.postMessage({id:n,result:t},a)}}catch(t){const{message:r,status:o=-32603}=t;e.postMessage({error:{code:o,message:r},id:n})}};var l=r(107);const d=new Map,f=(e,t,r)=>({...t,connect:r=>{let{port:n}=r;n.start();const o=e(n,t),a=(0,l.generateUniqueNumber)(d);return d.set(a,(()=>{o(),n.close(),d.delete(a)})),{result:a}},disconnect:e=>{let{portId:t}=e;const r=d.get(t);if(void 0===r)throw c({portId:t.toString()});return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=r();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),p=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;const n=f(p,t,r),o=u(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},m=e=>{e.onmessage=null,e.close()},h=new WeakMap,g=new WeakMap,v=(e=>{const t=(r=e,{...r,connect:e=>{let{call:t}=e;return async()=>{const{port1:e,port2:r}=new MessageChannel,n=await t("connect",{port:e},[e]);return h.set(r,n),r}},disconnect:e=>{let{call:t}=e;return async e=>{const r=h.get(e);if(void 0===r)throw new Error("The given port is not connected.");await t("disconnect",{portId:r})}},isSupported:e=>{let{call:t}=e;return()=>t("isSupported")}});var r;return e=>{const r=(e=>{if(g.has(e))return g.get(e);const t=new Map;return g.set(e,t),t})(e);e.addEventListener("message",(e=>{let{data:t}=e;const{id:n}=t;if(null!==n&&r.has(n)){const{reject:e,resolve:o}=r.get(n);r.delete(n),void 0===t.error?o(t.result):e(new Error(t.error.message))}})),(e=>"function"==typeof e.start)(e)&&e.start();const n=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(((a,s)=>{const i=(0,l.generateUniqueNumber)(r);r.set(i,{reject:s,resolve:a}),null===n?e.postMessage({id:i,method:t},o):e.postMessage({id:i,method:t,params:n},o)}))},o=function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.postMessage({id:null,method:t,params:r},n)};let a={};for(const[e,r]of Object.entries(t))a={...a,[e]:r({call:n,notify:o})};return{...a}}})({characterize:e=>{let{call:t}=e;return()=>t("characterize")},encode:e=>{let{call:t}=e;return(e,r)=>t("encode",{recordingId:e,timeslice:r})},record:e=>{let{call:t}=e;return async(e,r,n)=>{await t("record",{recordingId:e,sampleRate:r,typedArrays:n},n.map((e=>{let{buffer:t}=e;return t})))}}}),w=async(e,t)=>{const r=v(t),n=await r.characterize(),o=n.toString();if(e.has(o))throw new Error("There is already an encoder stored which handles exactly the same mime types.");return e.set(o,[n,r]),n},x=new Map,y=(e=>t=>{const r=e.get(t);if(void 0===r)throw new Error("There was no instance of an encoder stored with the given id.");return r})(x),M=((e,t)=>r=>{const n=t(r);return e.delete(r),n})(x,y),b=new Map,E=((e,t)=>r=>{const[n,o,a,s]=t(r);return a?new Promise((t=>{o.onmessage=a=>{let{data:i}=a;0===i.length?(e(o),t(n.encode(r,null))):n.record(r,s,i)}})):n.encode(r,null)})(m,M),A=(e=>t=>{for(const[r,n]of Array.from(e.values()))if(r.test(t))return n;throw new Error("There is no encoder registered which could handle the given mimeType.")})(b),_=((e,t,r)=>(n,o,a)=>{if(t.has(n))throw new Error(\'There is already an encoder registered with an id called "\'.concat(n,\'".\'));const s=r(o),{port1:i,port2:c}=new MessageChannel,u=[s,i,!0,a];return t.set(n,u),i.onmessage=t=>{let{data:r}=t;0===r.length?(e(i),u[2]=!1):s.record(n,a,r)},c})(m,x,A),I=(e=>(t,r)=>{const[n]=e(t);return n.encode(t,r)})(y);p(self,{encode:async e=>{let{encoderId:t,timeslice:r}=e;const n=null===r?await E(t):await I(t,r);return{result:n,transferables:n}},instantiate:e=>{let{encoderId:t,mimeType:r,sampleRate:n}=e;const o=_(t,r,n);return{result:o,transferables:[o]}},register:async e=>{let{port:t}=e;return{result:await w(b,t)}}})})()})();'],{type:"application/javascript; charset=utf-8"}),g=URL.createObjectURL(v),y=(e=>{const t=new Worker(e);return m(t)})(g),w=y.encode,b=y.instantiate,_=y.register;URL.revokeObjectURL(g);const x=(e="")=>{try{return new DOMException(e,"InvalidModificationError")}catch(t){return t.code=13,t.message=e,t.name="InvalidModificationError",t}},E=()=>{try{return new DOMException("","NotSupportedError")}catch(e){return e.code=9,e.name="NotSupportedError",e}},C=Symbol.observable||"@@observable";const M=()=>{},A=e=>{throw e};const T=((e,t)=>{const n=()=>{};return r=>{const o=(...e)=>{const o=r(t(...e));return void 0!==o?o:n};return o[Symbol.observable]=()=>({subscribe:(...e)=>({unsubscribe:o(...e)})}),e(o)}})((function(e){return Symbol.observable||("function"==typeof e&&e.prototype&&e.prototype[Symbol.observable]?(e.prototype[C]=e.prototype[Symbol.observable],delete e.prototype[Symbol.observable]):(e[C]=e[Symbol.observable],delete e[Symbol.observable])),e}),(function(e,t,n){return e&&"function"!=typeof e?e.next&&e.error&&e.complete?e:{complete:(e.complete||M).bind(e),error:(e.error||A).bind(e),next:(e.next||M).bind(e)}:{complete:n||M,error:t||A,next:e||M}})),O=(e=>(t,n,r)=>e((e=>{const o=t=>e.next(t);return t.addEventListener(n,o,r),()=>t.removeEventListener(n,o,r)})))(T);var S,I={exports:{}},k={exports:{}},U={exports:{}},R={exports:{}};(S=R).exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},S.exports.default=S.exports,S.exports.__esModule=!0,function(e){var t=R.exports;e.exports=function(e){if(Array.isArray(e))return t(e)},e.exports.default=e.exports,e.exports.__esModule=!0}(U);var L={exports:{}};!function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0}(L);var B={exports:{}};!function(e){var t=R.exports;e.exports=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}(B);var N={exports:{}};!function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}(N),function(e){var t=U.exports,n=L.exports,r=B.exports,o=N.exports;e.exports=function(e){return t(e)||n(e)||r(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0}(k);var V=(e,t)=>{if("string"!=typeof e)throw new TypeError("expected a string");return e.trim().replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\W/g,(e=>/[À-ž]/.test(e)?e:"-")).replace(/^-+|-+$/g,"").replace(/-{2,}/g,(e=>t&&t.condense?"-":e)).toLowerCase()},P={exports:{}};!function(e){e.exports=function(e){var t,n,r=/\w+/.exec(e);if(!r)return"an";var o=(n=r[0]).toLowerCase(),a=["honest","hour","hono"];for(t in a)if(0==o.indexOf(a[t]))return"an";if(1==o.length)return"aedhilmnorsx".indexOf(o)>=0?"an":"a";if(n.match(/(?!FJO|[HLMNS]Y.|RY[EO]|SQU|(F[LR]?|[HL]|MN?|N|RH?|S[CHKLMNPTVW]?|X(YL)?)[AEIOU])[FHLMNRSX][A-Z]/))return"an";var s=[/^e[uw]/,/^onc?e\b/,/^uni([^nmd]|mo)/,/^u[bcfhjkqrst][aeiou]/];for(t=0;t<s.length;t++)if(o.match(s[t]))return"a";return n.match(/^U[NK][AIEO]/)?"a":n==n.toUpperCase()?"aedhilmnorsx".indexOf(o[0])>=0?"an":"a":"aeiou".indexOf(o[0])>=0||o.match(/^y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)/)?"an":"a"}}(P),function(e,t,n,r){function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(t),s=o(n),i=o(r),u=function(e,t){return void 0===t?e:t.reduce((function(e,t){if("capitalize"===t){var n=e.charAt(0).toUpperCase(),r=e.slice(1);return"".concat(n).concat(r)}return"dashify"===t?s.default(e):"prependIndefiniteArticle"===t?"".concat(i.default(e)," ").concat(e):e}),e)},l=function(e){var t=e.name+e.modifiers.map((function(e){return"\\.".concat(e,"\\(\\)")})).join("");return new RegExp("\\$\\{".concat(t,"}"),"g")},c=function(e,t){for(var n=/\${([^.}]+)((\.[^(]+\(\))*)}/g,r=[],o=n.exec(e);null!==o;){var s={modifiers:[],name:o[1]};if(void 0!==o[3])for(var i=/\.[^(]+\(\)/g,c=i.exec(o[2]);null!==c;)s.modifiers.push(c[0].slice(1,-2)),c=i.exec(o[2]);r.push(s),o=n.exec(e)}var d=r.reduce((function(e,n){return e.map((function(e){return"string"==typeof e?e.split(l(n)).reduce((function(e,r,o){return 0===o?[r]:n.name in t?[].concat(a.default(e),[u(t[n.name],n.modifiers),r]):[].concat(a.default(e),[function(e){return u(e[n.name],n.modifiers)},r])}),[]):[e]})).reduce((function(e,t){return[].concat(a.default(e),a.default(t))}),[])}),[e]);return function(e){return d.reduce((function(t,n){return[].concat(a.default(t),"string"==typeof n?[n]:[n(e)])}),[]).join("")}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0===e.code?void 0:c(e.code,t),r=void 0===e.message?void 0:c(e.message,t);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=void 0===o&&(t instanceof Error||void 0!==t.code&&"Exception"===t.code.slice(-9))?{cause:t,missingParameters:{}}:{cause:o,missingParameters:t},s=a.cause,i=a.missingParameters,u=void 0===r?new Error:new Error(r(i));return null!==s&&(u.cause=s),void 0!==n&&(u.code=n(i)),void 0!==e.status&&(u.status=e.status),u}return o};e.compile=d,Object.defineProperty(e,"__esModule",{value:!0})}(I.exports,k.exports,V,P.exports);const j=-32603,W=-32602,D=-32601;I.exports.compile({message:'The requested method called "${method}" is not supported.',status:D}),I.exports.compile({message:'The handler of the method called "${method}" returned no required result.',status:j}),I.exports.compile({message:'The handler of the method called "${method}" returned an unexpected result.',status:j}),I.exports.compile({message:'The specified parameter called "portId" with the given value "${portId}" does not identify a port connected to this worker.',status:W});const F=((e,t,n)=>async r=>{const o=new e([n],{type:"application/javascript; charset=utf-8"}),a=t.createObjectURL(o);try{await r(a)}finally{t.revokeObjectURL(a)}})(Blob,URL,'(()=>{"use strict";class e extends AudioWorkletProcessor{constructor(){super(),this._encoderPort=null,this._state="inactive",this.port.onmessage=e=>{let{data:t}=e;"pause"===t.method?"active"===this._state||"recording"===this._state?(this._state="paused",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):"record"===t.method?"inactive"===this._state?(this._encoderPort=t.params.encoderPort,this._state="active",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):"resume"===t.method?"paused"===this._state?(this._state="active",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):"stop"===t.method?"active"!==this._state&&"paused"!==this._state&&"recording"!==this._state||null===this._encoderPort?this._sendUnexpectedStateError(t.id):(this._stop(this._encoderPort),this._sendAcknowledgement(t.id)):"number"==typeof t.id&&this.port.postMessage({error:{code:-32601,message:"The requested method is not supported."},id:t.id})}}process(e){let[t]=e;if("inactive"===this._state||"paused"===this._state)return!0;if("active"===this._state){if(void 0===t)throw new Error("No channelData was received for the first input.");if(0===t.length)return!0;this._state="recording"}if("recording"===this._state&&null!==this._encoderPort){if(void 0===t)throw new Error("No channelData was received for the first input.");if(0!==t.length)return this._encoderPort.postMessage(t,t.map((e=>{let{buffer:t}=e;return t}))),!0;this._stop(this._encoderPort)}return!1}_sendAcknowledgement(e){this.port.postMessage({id:e,result:null})}_sendUnexpectedStateError(e){this.port.postMessage({error:{code:-32603,message:"The internal state does not allow to process the given message."},id:e})}_stop(e){e.postMessage([]),e.close(),this._encoderPort=null,this._state="stopped"}}e.parameterDescriptors=[],registerProcessor("recorder-audio-worklet-processor",e)})();'),$=((e,t,n,r)=>(o,a,s={})=>{const i=new o(a,"recorder-audio-worklet-processor",{...s,channelCountMode:"explicit",numberOfInputs:1,numberOfOutputs:0}),u=new Map,l=t(u,i.port),c=n(i.port,"message")(e(u));i.port.start();let d="inactive";return Object.defineProperties(i,{pause:{get:()=>async()=>(r(["recording"],d),d="paused",l({method:"pause"}))},port:{get(){throw new Error("The port of a RecorderAudioWorkletNode can't be accessed.")}},record:{get:()=>async e=>(r(["inactive"],d),d="recording",l({method:"record",params:{encoderPort:e}},[e]))},resume:{get:()=>async()=>(r(["paused"],d),d="recording",l({method:"resume"}))},stop:{get:()=>async()=>{r(["paused","recording"],d),d="stopped";try{await l({method:"stop"})}finally{c()}}}}),i})((e=>({data:t})=>{const{id:n}=t;if(null!==n){const r=e.get(n);if(void 0!==r){const{reject:o,resolve:a}=r;e.delete(n),void 0===t.error?a(t.result):o(new Error(t.error.message))}}}),(e=>(t,n)=>(r,o=[])=>new Promise(((a,s)=>{const i=e(t);t.set(i,{reject:s,resolve:a}),n.postMessage({id:i,...r},o)})))(d.exports.generateUniqueNumber),O,((e,t)=>{if(!e.includes(t))throw new Error(`Expected the state to be ${e.map((e=>`"${e}"`)).join(" or ")} but it was "${t}".`)}));var z={exports:{}},q={exports:{}},H={exports:{}};!function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0}(H);var X={exports:{}};!function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0}(X);var Y={exports:{}};!function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}(Y),function(e){var t=H.exports,n=X.exports,r=B.exports,o=Y.exports;e.exports=function(e,a){return t(e)||n(e,a)||r(e,a)||o()},e.exports.default=e.exports,e.exports.__esModule=!0}(q);var G={exports:{}};!function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0}(G);var Z={exports:{}};!function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0}(Z),function(e,t,n,r){function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(t),s=o(n),i=o(r),u=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},l=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},c=function(e,t){return{startTime:t,type:"setValue",value:e}},d=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},f=function(e,t,n){var r=n.startTime,o=n.target,a=n.timeConstant;return o+(t-o)*Math.exp((r-e)/a)},p=function(e){return"exponentialRampToValue"===e.type},h=function(e){return"linearRampToValue"===e.type},m=function(e){return p(e)||h(e)},v=function(e){return"setValue"===e.type},g=function(e){return"setValueCurve"===e.type},y=function e(t,n,r,o){var a=t[n];return void 0===a?o:m(a)||v(a)?a.value:g(a)?a.values[a.values.length-1]:f(r,e(t,n-1,a.startTime,o),a)},w=function(e,t,n,r,o){return void 0===n?[r.insertTime,o]:m(n)?[n.endTime,n.value]:v(n)?[n.startTime,n.value]:g(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,y(e,t-1,n.startTime,o)]},b=function(e){return"cancelAndHold"===e.type},_=function(e){return"cancelScheduledValues"===e.type},x=function(e){return b(e)||_(e)?e.cancelTime:p(e)||h(e)?e.endTime:e.startTime},E=function(e,t,n,r){var o=r.endTime,a=r.value;return n===a?a:0<n&&0<a||n<0&&a<0?n*Math.pow(a/n,(e-t)/(o-t)):0},C=function(e,t,n,r){return n+(e-t)/(r.endTime-t)*(r.value-n)},M=function(e,t){var n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]},A=function(e,t){var n=t.duration,r=t.startTime,o=t.values,a=(e-r)/n*(o.length-1);return M(o,a)},T=function(e){return"setTarget"===e.type},O=function(e){function t(e){s.default(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return i.default(t,[{key:e,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=x(e);if(b(e)||_(e)){var n=this._automationEvents.findIndex((function(n){return _(e)&&g(n)?n.startTime+n.duration>=t:x(n)>=t})),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),b(e)){var o=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&m(r)){if(T(o))throw new Error("The internal list is malformed.");var a=g(o)?o.startTime+o.duration:x(o),s=g(o)?o.values[o.values.length-1]:o.value,i=p(r)?E(t,a,s,r):C(t,a,s,r),f=p(r)?u(i,t,this._currenTime):l(i,t,this._currenTime);this._automationEvents.push(f)}void 0!==o&&T(o)&&this._automationEvents.push(c(this.getValue(t),t)),void 0!==o&&g(o)&&o.startTime+o.duration>t&&(this._automationEvents[this._automationEvents.length-1]=d(new Float32Array([6,7]),o.startTime,t-o.startTime))}}else{var v=this._automationEvents.findIndex((function(e){return x(e)>t})),y=-1===v?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[v-1];if(void 0!==y&&g(y)&&x(y)+y.duration>t)return!1;var w=p(e)?u(e.value,e.endTime,this._currenTime):h(e)?l(e.value,t,this._currenTime):e;if(-1===v)this._automationEvents.push(w);else{if(g(e)&&t+e.duration>x(this._automationEvents[v]))return!1;this._automationEvents.splice(v,0,w)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex((function(t){return x(t)>e}));if(t>1){var n=this._automationEvents.slice(t-1),r=n[0];T(r)&&n.unshift(c(y(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var t=this._automationEvents.findIndex((function(t){return x(t)>e})),n=this._automationEvents[t],r=(-1===t?this._automationEvents.length:t)-1,o=this._automationEvents[r];if(void 0!==o&&T(o)&&(void 0===n||!m(n)||n.insertTime>e))return f(e,y(this._automationEvents,r-1,o.startTime,this._defaultValue),o);if(void 0!==o&&v(o)&&(void 0===n||!m(n)))return o.value;if(void 0!==o&&g(o)&&(void 0===n||!m(n)||o.startTime+o.duration>e))return e<o.startTime+o.duration?A(e,o):o.values[o.values.length-1];if(void 0!==o&&m(o)&&(void 0===n||!m(n)))return o.value;if(void 0!==n&&p(n)){var s=w(this._automationEvents,r,o,n,this._defaultValue),i=a.default(s,2),u=i[0],l=i[1];return E(e,u,l,n)}if(void 0!==n&&h(n)){var c=w(this._automationEvents,r,o,n,this._defaultValue),d=a.default(c,2),b=d[0],_=d[1];return C(e,b,_,n)}return this._defaultValue}}]),t}(Symbol.iterator),S=function(e){return{cancelTime:e,type:"cancelAndHold"}},I=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},k=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},U=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},R=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}};e.AutomationEventList=O,e.createCancelAndHoldAutomationEvent=S,e.createCancelScheduledValuesAutomationEvent=I,e.createExponentialRampToValueAutomationEvent=k,e.createLinearRampToValueAutomationEvent=U,e.createSetTargetAutomationEvent=R,e.createSetValueAutomationEvent=c,e.createSetValueCurveAutomationEvent=d,Object.defineProperty(e,"__esModule",{value:!0})}(z.exports,q.exports,G.exports,Z.exports);const K=new WeakSet,Q=new WeakMap,J=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,oe=new WeakMap,ae=new WeakMap,se=new WeakMap,ie={construct:()=>ie},ue=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,le=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),o=r.match(ue);for(;null!==o;){const e=o[1].slice(1,-1),a=o[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(a),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(ue)}return[n.join(";"),r]},ce=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},de=e=>{if(!(e=>{try{new new Proxy(e,ie)}catch{return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},fe=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},pe=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[r]=n;return e.delete(r),r},he=(e,t,n,r)=>{const o=fe(e,t),a=pe(o,(e=>e[0]===n&&e[1]===r));return 0===o.size&&e.delete(t),a},me=e=>fe(re,e),ve=e=>{if(K.has(e))throw new Error("The AudioNode is already stored.");K.add(e),me(e).forEach((e=>e(!0)))},ge=e=>"port"in e,ye=e=>{if(!K.has(e))throw new Error("The AudioNode is not stored.");K.delete(e),me(e).forEach((e=>e(!1)))},we=(e,t)=>{!ge(e)&&t.every((e=>0===e.size))&&ye(e)},be=(e,t)=>e.context===t,_e=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},xe=()=>new DOMException("","IndexSizeError"),Ee={numberOfChannels:1},Ce=e=>K.has(e),Me={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Ae=e=>fe(Q,e),Te=e=>fe(ee,e),Oe=(e,t)=>{const{activeInputs:n}=Ae(e);n.forEach((n=>n.forEach((([n])=>{t.includes(e)||Oe(n,[...t,e])}))));const r=(e=>"playbackRate"in e)(e)?[e.playbackRate]:ge(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e)(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const e of r){const n=Te(e);void 0!==n&&n.activeInputs.forEach((([e])=>Oe(e,t)))}Ce(e)&&ye(e)},Se=e=>"context"in e,Ie=e=>Se(e[0]),ke=(e,t,n,r)=>{for(const t of e)if(n(t)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},Ue=(e,t,[n,r],o)=>{ke(e,[t,n,r],(e=>e[0]===t&&e[1]===n),o)},Re=(e,[t,n,r],o)=>{const a=e.get(t);void 0===a?e.set(t,new Set([[n,r]])):ke(a,[n,r],(e=>e[0]===n),o)},Le=e=>"inputs"in e,Be=(e,t,n,r)=>{if(Le(t)){const o=t.inputs[r];return e.connect(o,n,0),[o,n,0]}return e.connect(t,n,r),[t,n,r]},Ne=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},Ve=(e,t)=>{if(!me(e).delete(t))throw new Error("Missing the expected event listener.")},Pe=(e,t,n)=>{const r=fe(e,t),o=pe(r,(e=>e[0]===n));return 0===r.size&&e.delete(t),o},je=(e,t,n,r)=>{Le(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},We=e=>fe(J,e),De=e=>fe(te,e),Fe=e=>oe.has(e),$e=e=>!K.has(e),ze=(e,t)=>new Promise((n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),r=e.createGain(),o=e.createBuffer(1,2,44100),a=o.getChannelData(0);a[0]=1,a[1]=1;const s=e.createBufferSource();s.buffer=o,s.loop=!0,s.connect(t).connect(e.destination),s.connect(r),s.disconnect(r),t.onaudioprocess=r=>{const o=r.inputBuffer.getChannelData(0);Array.prototype.some.call(o,(e=>1===e))?n(!0):n(!1),s.stop(),t.onaudioprocess=null,s.disconnect(t),t.disconnect(e.destination)},s.start()}})),qe=(e,t)=>{const n=new Map;for(const t of e)for(const e of t){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach(((e,n)=>t(n,e)))},He=e=>"context"in e,Xe=(e,t,n,r)=>{const{activeInputs:o,passiveInputs:a}=Te(t),{outputs:s}=Ae(e),i=me(e),u=s=>{const i=We(e),u=De(t);if(s){const t=Pe(a,e,n);Ue(o,e,t,!1),r||Fe(e)||i.connect(u,n)}else{const t=((e,t,n)=>pe(e,(e=>e[0]===t&&e[1]===n)))(o,e,n);Re(a,t,!1),r||Fe(e)||i.disconnect(u,n)}};return!!ke(s,[t,n],(e=>e[0]===t&&e[1]===n),!0)&&(i.add(u),Ce(e)?Ue(o,e,[n,u],!0):Re(a,[e,n,u],!0),!0)},Ye=(e,t,n,r,o)=>{const[a,s]=((e,t,n,r)=>{const{activeInputs:o,passiveInputs:a}=Ae(t),s=Ne(o[r],e,n);if(null===s)return[he(a,e,n,r)[2],!1];return[s[2],!0]})(e,n,r,o);if(null!==a&&(Ve(e,a),!s||t||Fe(e)||je(We(e),We(n),r,o)),Ce(n)){const{activeInputs:e}=Ae(n);we(n,e)}},Ge=(e,t,n,r)=>{const[o,a]=((e,t,n)=>{const{activeInputs:r,passiveInputs:o}=Te(t),a=Ne(r,e,n);if(null===a)return[Pe(o,e,n)[1],!1];return[a[2],!0]})(e,n,r);null!==o&&(Ve(e,o),!a||t||Fe(e)||We(e).disconnect(De(n),r))};class Ze{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach(((n,r)=>e.call(t,n,r,this)))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Ke={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Qe(e,t,n,r,o){if("function"==typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,o);else{const a=e.getChannelData(r);if(0===t[n].byteLength)t[n]=a.slice(o,o+128);else{const e=new Float32Array(a.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const Je=(e,t,n,r,o)=>{"function"==typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],r,o):0!==t[n].byteLength&&e.getChannelData(r).set(t[n],o)},et=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const e=[],o="number"==typeof t?t:t[r];for(let t=0;t<o;t+=1)e.push(new Float32Array(128));n.push(e)}return n},tt=async(e,t,n,r,o,a,s)=>{const i=null===t?128*Math.ceil(e.context.length/128):t.length,u=r.channelCount*r.numberOfInputs,l=o.reduce(((e,t)=>e+t),0),c=0===l?null:n.createBuffer(l,i,n.sampleRate);if(void 0===a)throw new Error("Missing the processor constructor.");const d=Ae(e),f=await((e,t)=>{const n=fe(se,e),r=We(t);return fe(n,r)})(n,e),p=et(r.numberOfInputs,r.channelCount),h=et(r.numberOfOutputs,o),m=Array.from(e.parameters.keys()).reduce(((e,t)=>({...e,[t]:new Float32Array(128)})),{});for(let l=0;l<i;l+=128){if(r.numberOfInputs>0&&null!==t)for(let e=0;e<r.numberOfInputs;e+=1)for(let n=0;n<r.channelCount;n+=1)Qe(t,p[e],n,n,l);void 0!==a.parameterDescriptors&&null!==t&&a.parameterDescriptors.forEach((({name:e},n)=>{Qe(t,m,e,u+n,l)}));for(let e=0;e<r.numberOfInputs;e+=1)for(let t=0;t<o[e];t+=1)0===h[e][t].byteLength&&(h[e][t]=new Float32Array(128));try{const e=p.map(((e,t)=>0===d.activeInputs[t].size?[]:e)),t=s(l/n.sampleRate,n.sampleRate,(()=>f.process(e,h,m)));if(null!==c)for(let e=0,t=0;e<r.numberOfOutputs;e+=1){for(let n=0;n<o[e];n+=1)Je(c,h[e],n,t+n,l);t+=o[e]}if(!t)break}catch(t){e.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}));break}}return c},nt=(e,t,n)=>{const r=t[n];if(void 0===r)throw e();return r},rt=()=>new DOMException("","InvalidStateError"),ot=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},at=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n]&&(e[n]=r)},st=(e,t)=>{at(e,t,"channelCount"),at(e,t,"channelCountMode"),at(e,t,"channelInterpretation")},it=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n].value&&(e[n].value=r)},ut=e=>{var t;e.start=(t=e.start,(n=0,r=0,o)=>{if("number"==typeof o&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,o)})},lt=e=>{var t;e.stop=(t=e.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},ct=async(e,t)=>{const n=await(e=>new Promise(((t,n)=>{const{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:e})=>{r.close(),o.close(),t(e)},r.onmessageerror=({data:e})=>{r.close(),o.close(),n(e)},o.postMessage(e)})))(t);return new e(n)},dt=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return st(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw rt()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw rt()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw rt()}})})(n),n},ft=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),pt=(e,t)=>{const n=e.createGain();return st(n,t),it(n,t,"gain"),n},ht=(e,t,n,r)=>e.createScriptProcessor(t,n,r),mt=()=>new DOMException("","NotSupportedError"),vt=(e,t,n,r)=>{let o=e;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:a,set:s}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(e,t,{get:n(a),set:r(s)})},gt=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(9!==r.code)throw r;gt(e,t,n+1e-7)}},yt=e=>{const t=e.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},wt=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},bt=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof t?t.call(e,n):t.handleEvent.call(e,n)},_t=(e=>(t,n,[r,o,a],s)=>{e(t[o],[n,r,a],(e=>e[0]===n&&e[1]===r),s)})(ke),xt=(e=>(t,n,[r,o,a],s)=>{const i=t.get(r);void 0===i?t.set(r,new Set([[o,n,a]])):e(i,[o,n,a],(e=>e[0]===o&&e[1]===n),s)})(ke),Et=(e=>(t,n,r,o)=>e(t[o],(e=>e[0]===n&&e[1]===r)))(pe),Ct=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(new WeakMap),Mt=(At=new Map,Tt=new WeakMap,(e,t)=>{const n=Tt.get(e);if(void 0!==n)return n;const r=At.get(e);if(void 0!==r)return r;try{const n=t();return n instanceof Promise?(At.set(e,n),n.catch((()=>!1)).then((t=>(At.delete(e),Tt.set(e,t),t)))):(Tt.set(e,n),n)}catch{return Tt.set(e,!1),!1}});var At,Tt;const Ot="undefined"==typeof window?null:window,St=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(Ae),It=((e,t,n)=>async(r,o,a)=>{const s=e(r);await Promise.all(s.activeInputs.map(((e,s)=>Array.from(e).map((async([e,i])=>{const u=t(e),l=await u.render(e,o),c=r.context.destination;n(e)||r===c&&n(r)||l.connect(a,i,s)})))).reduce(((e,t)=>[...e,...t]),[]))})(Ae,St,Fe),kt=(Ut=ne,e=>{const t=Ut.get(e);if(void 0===t)throw rt();return t});var Ut;const Rt=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(Ot),Lt=(e=>t=>null!==e&&t instanceof e)(Rt),Bt=new WeakMap,Nt=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,r){if(null!==n){let o=this._listeners.get(n);void 0===o&&(o=e(this,n),"function"==typeof n&&this._listeners.set(n,o)),this._nativeEventTarget.addEventListener(t,o,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}})(bt),Vt=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(Ot),Pt=(e=>t=>null!==e&&t instanceof e)(Vt),jt=(e=>t=>null!==e&&"function"==typeof e.AudioNode&&t instanceof e.AudioNode)(Ot),Wt=(e=>t=>null!==e&&"function"==typeof e.AudioParam&&t instanceof e.AudioParam)(Ot),Dt=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(Ot),Ft=((e,t,n,r,o,a,s,i,u,l,c,d,f,p,h,m)=>class extends l{constructor(t,r,o,a){super(o),this._context=t,this._nativeAudioNode=o;const s=c(t);d(s)&&!0!==n(ze,(()=>ze(s,m)))&&(e=>{const t=new Map;var n,r;e.connect=(n=e.connect.bind(e),(e,r=0,o=0)=>{const a=He(e)?n(e,r,o):n(e,r),s=t.get(e);return void 0===s?t.set(e,[{input:o,output:r}]):s.every((e=>e.input!==o||e.output!==r))&&s.push({input:o,output:r}),a}),e.disconnect=(r=e.disconnect,(n,o,a)=>{if(r.apply(e),void 0===n)t.clear();else if("number"==typeof n)for(const[e,r]of t){const o=r.filter((e=>e.output!==n));0===o.length?t.delete(e):t.set(e,o)}else if(t.has(n))if(void 0===o)t.delete(n);else{const e=t.get(n);if(void 0!==e){const r=e.filter((e=>e.output!==o&&(e.input!==a||void 0===a)));0===r.length?t.delete(n):t.set(n,r)}}for(const[n,r]of t)r.forEach((t=>{He(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)}))})})(o),J.set(this,o),re.set(this,new Set),"closed"!==t.state&&r&&ve(this),e(this,a,o)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,n=0,i=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw o();const l=c(this._context),d=h(l);if(f(e)||p(e))throw a();if(Se(e)){const o=We(e);try{const t=Be(this._nativeAudioNode,o,n,i),r=$e(this);(d||r)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!r&&$e(e)&&ve(e)}catch(e){if(12===e.code)throw a();throw e}if(t(this,e,n,i,d)){const t=u([this],e);qe(t,r(d))}return e}const m=De(e);if("playbackRate"===m.name&&1024===m.maxValue)throw s();try{this._nativeAudioNode.connect(m,n),(d||$e(this))&&this._nativeAudioNode.disconnect(m,n)}catch(e){if(12===e.code)throw a();throw e}if(Xe(this,e,n,d)){const t=u([this],e);qe(t,r(d))}}disconnect(e,t,n){let r;const s=c(this._context),l=h(s);if(void 0===e)r=((e,t)=>{const n=Ae(e),r=[];for(const o of n.outputs)Ie(o)?Ye(e,t,...o):Ge(e,t,...o),r.push(o[0]);return n.outputs.clear(),r})(this,l);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw o();r=((e,t,n)=>{const r=Ae(e),o=[];for(const a of r.outputs)a[1]===n&&(Ie(a)?Ye(e,t,...a):Ge(e,t,...a),o.push(a[0]),r.outputs.delete(a));return o})(this,l,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw o();if(Se(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw o();if(r=((e,t,n,r,o)=>{const a=Ae(e);return Array.from(a.outputs).filter((e=>!(e[0]!==n||void 0!==r&&e[1]!==r||void 0!==o&&e[2]!==o))).map((n=>(Ie(n)?Ye(e,t,...n):Ge(e,t,...n),a.outputs.delete(n),n[0])))})(this,l,e,t,n),0===r.length)throw a()}for(const e of r){const t=u([this],e);qe(t,i)}}})(($t=Q,(e,t,n)=>{const r=[];for(let e=0;e<n.numberOfInputs;e+=1)r.push(new Set);$t.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,r,o,a,s,i,u,l,c,d,f)=>{const p=new WeakMap;return(h,m,v,g,y)=>{const{activeInputs:w,passiveInputs:b}=a(m),{outputs:_}=a(h),x=i(h),E=a=>{const i=u(m),l=u(h);if(a){const t=he(b,h,v,g);e(w,h,t,!1),y||d(h)||n(l,i,v,g),f(m)&&ve(m)}else{const e=r(w,h,v,g);t(b,g,e,!1),y||d(h)||o(l,i,v,g);const n=s(m);if(0===n)c(m)&&we(m,w);else{const e=p.get(m);void 0!==e&&clearTimeout(e),p.set(m,setTimeout((()=>{c(m)&&we(m,w)}),1e3*n))}}};return!!l(_,[m,v,g],(e=>e[0]===m&&e[1]===v&&e[2]===g),!0)&&(x.add(E),c(h)?e(w,h,[v,g,E],!0):t(b,g,[h,v,E],!0),!0)}})(_t,xt,Be,Et,je,Ae,Ct,me,We,ke,Ce,Fe,$e),Mt,((e,t,n,r,o,a)=>s=>(i,u)=>{const l=e.get(i);if(void 0===l){if(!s&&a(i)){const e=r(i),{outputs:a}=n(i);for(const n of a)if(Ie(n)){const o=r(n[0]);t(e,o,n[1],n[2])}else{const t=o(n[0]);e.disconnect(t,n[1])}}e.set(i,u)}else e.set(i,l+u)})(oe,je,Ae,We,De,Ce),xe,(()=>new DOMException("","InvalidAccessError")),mt,((e,t,n,r,o,a,s,i)=>(u,l)=>{const c=t.get(u);if(void 0===c)throw new Error("Missing the expected cycle count.");const d=a(u.context),f=i(d);if(c===l){if(t.delete(u),!f&&s(u)){const t=r(u),{outputs:a}=n(u);for(const n of a)if(Ie(n)){const o=r(n[0]);e(t,o,n[1],n[2])}else{const e=o(n[0]);t.connect(e,n[1])}}}else t.set(u,c-l)})(Be,oe,Ae,We,De,kt,Ce,Lt),((e,t,n)=>function r(o,a){const s=Se(a)?a:n(e,a);if((e=>"delayTime"in e)(s))return[];if(o[0]===s)return[o];if(o.includes(s))return[];const{outputs:i}=t(s);return Array.from(i).map((e=>r([...o,s],e[0]))).reduce(((e,t)=>e.concat(t)),[])})(Bt,Ae,fe),Nt,kt,Pt,jt,Wt,Lt,Dt);var $t;const zt=new WeakSet,qt=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(Ot),Ht=(Xt=new Uint32Array(1),e=>(Xt[0]=e,Xt[0]));var Xt;const Yt=((e,t)=>n=>{n.copyFromChannel=(r,o,a=0)=>{const s=e(a),i=e(o);if(i>=n.numberOfChannels)throw t();const u=n.length,l=n.getChannelData(i),c=r.length;for(let e=s<0?-s:0;e+s<u&&e<c;e+=1)r[e]=l[e+s]},n.copyToChannel=(r,o,a=0)=>{const s=e(a),i=e(o);if(i>=n.numberOfChannels)throw t();const u=n.length,l=n.getChannelData(i),c=r.length;for(let e=s<0?-s:0;e+s<u&&e<c;e+=1)l[e+s]=r[e]}})(Ht,xe),Gt=(e=>t=>{t.copyFromChannel=(n=>(r,o,a=0)=>{const s=e(a),i=e(o);if(s<t.length)return n.call(t,r,i,s)})(t.copyFromChannel),t.copyToChannel=(n=>(r,o,a=0)=>{const s=e(a),i=e(o);if(s<t.length)return n.call(t,r,i,s)})(t.copyToChannel)})(Ht),Zt=((e,t,n,r,o,a,s,i)=>{let u=null;return class l{constructor(l){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:c,numberOfChannels:d,sampleRate:f}={...Ee,...l};null===u&&(u=new o(1,1,44100));const p=null!==r&&t(a,a)?new r({length:c,numberOfChannels:d,sampleRate:f}):u.createBuffer(d,c,f);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(s(p),(e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(e){if(12===e.code)throw xe();throw e}})})(p)):t(_e,(()=>_e(p)))||i(p),e.add(p),p}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===l.prototype||e.has(t)}}})(zt,Mt,mt,qt,Rt,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0})(qt),Yt,Gt),Kt=(e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const o=()=>{n.removeEventListener("ended",o),n.disconnect(r),r.disconnect()};n.addEventListener("ended",o)})(pt),Qt=((e,t,n)=>async(r,o,a)=>{const s=t(r);await Promise.all(Array.from(s.activeInputs).map((async([t,r])=>{const s=e(t),i=await s.render(t,o);n(t)||i.connect(a,r)})))})(St,Te,Fe),Jt=(e=>(t,n,r)=>e(n,t,r))(Qt),en=((e,t,n,r,o,a,s,i,u,l,c)=>(d,f)=>{const p=d.createBufferSource();return st(p,f),it(p,f,"playbackRate"),at(p,f,"buffer"),at(p,f,"loop"),at(p,f,"loopEnd"),at(p,f,"loopStart"),t(n,(()=>n(d)))||(e=>{e.start=(t=>{let n=!1;return(r=0,o=0,a)=>{if(n)throw rt();t.call(e,r,o,a),n=!0}})(e.start)})(p),t(r,(()=>r(d)))||u(p),t(o,(()=>o(d)))||l(p,d),t(a,(()=>a(d)))||ut(p),t(s,(()=>s(d)))||c(p,d),t(i,(()=>i(d)))||lt(p),e(d,p),p})(Kt,Mt,(e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1}),(e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0}),(e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0}),yt,(e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}}),wt,(e=>{var t;e.start=(t=e.start,(n=0,r=0,o)=>{const a=e.buffer,s=null===a?r:Math.min(a.duration,r);null!==a&&s>a.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,s,o)})}),(e=>(t,n)=>{const r=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=r),e(t,"buffer",(e=>()=>{const n=e.call(t);return n===r?null:n}),(e=>n=>e.call(t,null===n?r:n)))})(vt),((e,t)=>{const n=t.createGain();e.connect(n);const r=(o=e.disconnect,()=>{o.call(e,n),e.removeEventListener("ended",r)});var o;e.addEventListener("ended",r),ft(e,n),e.stop=(t=>{let r=!1;return(o=0)=>{if(r)try{t.call(e,o)}catch{n.gain.setValueAtTime(0,o)}else t.call(e,o),r=!0}})(e.stop)})),tn=((e,t)=>(n,r,o)=>(e(r).replay(o),t(r,n,o)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(Te),Qt),nn=((e,t,n,r,o)=>()=>{const a=new WeakMap;let s=null,i=null;return{set start(e){s=e},set stop(e){i=e},render(u,l){const c=a.get(l);return void 0!==c?Promise.resolve(c):(async(u,l)=>{let c=n(u);const d=be(c,l);if(!d){const e={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,loop:c.loop,loopEnd:c.loopEnd,loopStart:c.loopStart,playbackRate:c.playbackRate.value};c=t(l,e),null!==s&&c.start(...s),null!==i&&c.stop(i)}return a.set(l,c),d?await e(l,u.playbackRate,c.playbackRate):await r(l,u.playbackRate,c.playbackRate),await o(u,l,c),c})(u,l)}}})(Jt,en,We,tn,It),rn=((e,t,n,r,o,a,s,i,u,l,c,d,f)=>(p,h,m,v=null,g=null)=>{const y=new z.exports.AutomationEventList(m.defaultValue),w=h?r(y):null,b={get defaultValue(){return m.defaultValue},get maxValue(){return null===v?m.maxValue:v},get minValue(){return null===g?m.minValue:g},get value(){return m.value},set value(e){m.value=e,b.setValueAtTime(e,p.context.currentTime)},cancelAndHoldAtTime(e){if("function"==typeof m.cancelAndHoldAtTime)null===w&&y.flush(p.context.currentTime),y.add(o(e)),m.cancelAndHoldAtTime(e);else{const t=Array.from(y).pop();null===w&&y.flush(p.context.currentTime),y.add(o(e));const n=Array.from(y).pop();m.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return b},cancelScheduledValues:e=>(null===w&&y.flush(p.context.currentTime),y.add(a(e)),m.cancelScheduledValues(e),b),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;return null===w&&y.flush(p.context.currentTime),y.add(s(e,t)),m.exponentialRampToValueAtTime(e,t),b},linearRampToValueAtTime:(e,t)=>(null===w&&y.flush(p.context.currentTime),y.add(i(e,t)),m.linearRampToValueAtTime(e,t),b),setTargetAtTime:(e,t,n)=>(null===w&&y.flush(p.context.currentTime),y.add(u(e,t,n)),m.setTargetAtTime(e,t,n),b),setValueAtTime:(e,t)=>(null===w&&y.flush(p.context.currentTime),y.add(l(e,t)),m.setValueAtTime(e,t),b),setValueCurveAtTime(e,t,n){const r=e instanceof Float32Array?e:new Float32Array(e);if(null!==d&&"webkitAudioContext"===d.name){const e=t+n,o=p.context.sampleRate,a=Math.ceil(t*o),s=Math.floor(e*o),i=s-a,u=new Float32Array(i);for(let e=0;e<i;e+=1){const s=(r.length-1)/n*((a+e)/o-t),i=Math.floor(s),l=Math.ceil(s);u[e]=i===l?r[i]:(1-(s-i))*r[i]+(1-(l-s))*r[l]}null===w&&y.flush(p.context.currentTime),y.add(c(u,t,n)),m.setValueCurveAtTime(u,t,n);const l=s/o;l<e&&f(b,u[u.length-1],l),f(b,r[r.length-1],e)}else null===w&&y.flush(p.context.currentTime),y.add(c(r,t,n)),m.setValueCurveAtTime(r,t,n);return b}};return n.set(b,m),t.set(b,p),e(b,w),b})((on=ee,(e,t)=>{on.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),Bt,te,(e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:r}=n;t.exponentialRampToValueAtTime(r,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:r}=n;t.linearRampToValueAtTime(r,e)}else if("setTarget"===n.type){const{startTime:e,target:r,timeConstant:o}=n;t.setTargetAtTime(r,e,o)}else if("setValue"===n.type){const{startTime:e,value:r}=n;t.setValueAtTime(r,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:r,values:o}=n;t.setValueCurveAtTime(o,r,e)}}}})),z.exports.createCancelAndHoldAutomationEvent,z.exports.createCancelScheduledValuesAutomationEvent,z.exports.createExponentialRampToValueAutomationEvent,z.exports.createLinearRampToValueAutomationEvent,z.exports.createSetTargetAutomationEvent,z.exports.createSetValueAutomationEvent,z.exports.createSetValueCurveAutomationEvent,Vt,gt);var on;const an=((e,t,n,r,o,a,s,i)=>class extends e{constructor(e,r){const i=a(e),u={...Me,...r},l=o(i,u),c=s(i),d=c?t():null;super(e,!1,l,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==u.buffer,this._nativeAudioBufferSourceNode=l,this._onended=null,this._playbackRate=n(this,c,l.playbackRate,34028234663852886e22,-34028234663852886e22)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(e=0,t=0,n){if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){ve(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),Ce(this)&&ye(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(Ft,nn,rn,rt,en,kt,Lt,bt),sn=((e,t,n,r,o,a,s,i)=>class extends e{constructor(e,n){const r=a(e),u=s(r),l=o(r,n,u);super(e,!1,l,u?t(i):null),this._isNodeOfNativeOfflineAudioContext=u,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Ft,(e=>{const t=new WeakMap;return{render(n,r){const o=t.get(r);return void 0!==o?Promise.resolve(o):(async(n,r)=>{const o=r.destination;return t.set(r,o),await e(n,r,o),o})(n,r)}}}),xe,rt,((e,t)=>(n,r,o)=>{const a=n.destination;if(a.channelCount!==r)try{a.channelCount=r}catch{}o&&"explicit"!==a.channelCountMode&&(a.channelCountMode="explicit"),0===a.maxChannelCount&&Object.defineProperty(a,"maxChannelCount",{value:r});const s=e(n,{channelCount:r,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return t(s,"channelCount",(e=>()=>e.call(s)),(e=>t=>{e.call(s,t);try{a.channelCount=t}catch(e){if(t>a.maxChannelCount)throw e}})),t(s,"channelCountMode",(e=>()=>e.call(s)),(e=>t=>{e.call(s,t),a.channelCountMode=t})),t(s,"channelInterpretation",(e=>()=>e.call(s)),(e=>t=>{e.call(s,t),a.channelInterpretation=t})),Object.defineProperty(s,"maxChannelCount",{get:()=>a.maxChannelCount}),s.connect(a),s})(pt,vt),kt,Lt,It),un=((e,t)=>(n,r,o)=>{const a=new Set;var s,i;return n.connect=(s=n.connect,(o,i=0,u=0)=>{const l=0===a.size;if(t(o))return s.call(n,o,i,u),e(a,[o,i,u],(e=>e[0]===o&&e[1]===i&&e[2]===u),!0),l&&r(),o;s.call(n,o,i),e(a,[o,i],(e=>e[0]===o&&e[1]===i),!0),l&&r()}),n.disconnect=(i=n.disconnect,(e,r,s)=>{const u=a.size>0;if(void 0===e)i.apply(n),a.clear();else if("number"==typeof e){i.call(n,e);for(const t of a)t[1]===e&&a.delete(t)}else{t(e)?i.call(n,e,r,s):i.call(n,e,r);for(const t of a)t[0]!==e||void 0!==r&&t[1]!==r||void 0!==s&&t[2]!==s||a.delete(t)}const l=0===a.size;u&&l&&o()}),n})(ke,jt),ln=((e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const o=n.createBufferSource();t(r,(()=>{const e=r.numberOfInputs;for(let t=0;t<e;t+=1)o.connect(r,0,t)}),(()=>o.disconnect(r)))})(rt,un),cn=((e,t)=>(n,r)=>{const o=n.createChannelMerger(r.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,o),st(o,r),o})(Vt,ln),dn=((e,t,n,r)=>(o,{offset:a,...s})=>{const i=o.createBuffer(1,2,44100),u=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(o,{...s,gain:a}),c=i.getChannelData(0);c[0]=1,c[1]=1,u.buffer=i,u.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){l.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){l.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){l.channelInterpretation=e},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return u.onended},set onended(e){u.onended=e},addEventListener:(...e)=>u.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>u.dispatchEvent(e[0]),removeEventListener:(...e)=>u.removeEventListener(e[0],e[1],e[2]),start(e=0){u.start.call(u,e)},stop(e=0){u.stop.call(u,e)}};return e(o,u),r(ft(d,l),(()=>u.connect(l)),(()=>u.disconnect(l)))})(Kt,en,pt,un),fn=((e,t,n,r,o)=>(a,s)=>{if(void 0===a.createConstantSource)return n(a,s);const i=a.createConstantSource();return st(i,s),it(i,s,"offset"),t(r,(()=>r(a)))||ut(i),t(o,(()=>o(a)))||lt(i),e(a,i),i})(Kt,Mt,dn,yt,wt),pn=((e,t,n,r)=>o=>e(ot,(()=>ot(o)))?Promise.resolve(e(r,r)).then((e=>{if(!e){const e=n(o,512,0,1);o.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>o.currentTime,e.connect(o.destination)}return o.startRendering()})):new Promise((e=>{const n=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(o.destination),o.startRendering()})))(Mt,pt,ht,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((e=>{n.oncomplete=()=>{r.disconnect(),e(0!==n.currentTime)},n.startRendering()}))})(pt,Rt)),hn=((e,t,n,r,o,a,s,i)=>(u,l)=>{const c=l.listener,{forwardX:d,forwardY:f,forwardZ:p,positionX:h,positionY:m,positionZ:v,upX:g,upY:y,upZ:w}=void 0===c.forwardX?(()=>{const d=new Float32Array(1),f=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=s(l);let h=!1,m=[0,0,-1,0,1,0],v=[0,0,0];const g=()=>{if(h)return;h=!0;const e=r(l,256,9,0);e.onaudioprocess=({inputBuffer:e})=>{const t=[a(e,d,0),a(e,d,1),a(e,d,2),a(e,d,3),a(e,d,4),a(e,d,5)];t.some(((e,t)=>e!==m[t]))&&(c.setOrientation(...t),m=t);const n=[a(e,d,6),a(e,d,7),a(e,d,8)];n.some(((e,t)=>e!==v[t]))&&(c.setPosition(...n),v=n)},f.connect(e)},y=e=>t=>{t!==m[e]&&(m[e]=t,c.setOrientation(...m))},w=e=>t=>{t!==v[e]&&(v[e]=t,c.setPosition(...v))},b=(t,r,a)=>{const s=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});s.connect(f,0,t),s.start(),Object.defineProperty(s.offset,"defaultValue",{get:()=>r});const c=e({context:u},p,s.offset,34028234663852886e22,-34028234663852886e22);var d,h,m,v,y,w,b;return i(c,"value",(e=>()=>e.call(c)),(e=>t=>{try{e.call(c,t)}catch(e){if(9!==e.code)throw e}g(),p&&a(t)})),c.cancelAndHoldAtTime=(d=c.cancelAndHoldAtTime,p?()=>{throw o()}:(...e)=>{const t=d.apply(c,e);return g(),t}),c.cancelScheduledValues=(h=c.cancelScheduledValues,p?()=>{throw o()}:(...e)=>{const t=h.apply(c,e);return g(),t}),c.exponentialRampToValueAtTime=(m=c.exponentialRampToValueAtTime,p?()=>{throw o()}:(...e)=>{const t=m.apply(c,e);return g(),t}),c.linearRampToValueAtTime=(v=c.linearRampToValueAtTime,p?()=>{throw o()}:(...e)=>{const t=v.apply(c,e);return g(),t}),c.setTargetAtTime=(y=c.setTargetAtTime,p?()=>{throw o()}:(...e)=>{const t=y.apply(c,e);return g(),t}),c.setValueAtTime=(w=c.setValueAtTime,p?()=>{throw o()}:(...e)=>{const t=w.apply(c,e);return g(),t}),c.setValueCurveAtTime=(b=c.setValueCurveAtTime,p?()=>{throw o()}:(...e)=>{const t=b.apply(c,e);return g(),t}),c};return{forwardX:b(0,0,y(0)),forwardY:b(1,0,y(1)),forwardZ:b(2,-1,y(2)),positionX:b(6,0,w(0)),positionY:b(7,0,w(1)),positionZ:b(8,0,w(2)),upX:b(3,0,y(3)),upY:b(4,1,y(4)),upZ:b(5,0,y(5))}})():c;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return h},get positionY(){return m},get positionZ(){return v},get upX(){return g},get upY(){return y},get upZ(){return w}}})(rn,cn,fn,ht,mt,((e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0])),Lt,vt),mn=new WeakMap,vn=((e,t,n,r,o,a)=>class extends n{constructor(n,a){super(n),this._nativeContext=n,ne.set(this,n),r(n)&&o.set(n,new Set),this._destination=new e(this,a),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"==typeof e?a(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(sn,hn,Nt,Lt,mn,bt),gn=(e=>null!==e&&e.isSecureContext)(Ot),yn=(e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return r()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(Ot),wn=new WeakMap,bn=((e,t)=>n=>{let r=e.get(n);if(void 0!==r)return r;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r})(wn,Rt),_n=gn?((e,t,n,r,o,a,s,i,u,l,c,d,f)=>{let p=0;return(h,m,v={credentials:"omit"})=>{const g=c.get(h);if(void 0!==g&&g.has(m))return Promise.resolve();const y=l.get(h);if(void 0!==y){const e=y.get(m);if(void 0!==e)return e}const w=a(h),b=void 0===w.audioWorklet?o(m).then((([e,t])=>{const[r,o]=le(e,t);return n(`${r};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${o}\n})})(window,'_AWGS')`)})).then((()=>{const e=f._AWGS.pop();if(void 0===e)throw new SyntaxError;r(w.currentTime,w.sampleRate,(()=>e(class{},void 0,((e,n)=>{if(""===e.trim())throw t();const r=ae.get(w);if(void 0!==r){if(r.has(e))throw t();de(n),ce(n.parameterDescriptors),r.set(e,n)}else de(n),ce(n.parameterDescriptors),ae.set(w,new Map([[e,n]]))}),w.sampleRate,void 0,void 0)))})):Promise.all([o(m),Promise.resolve(e(d,d))]).then((([[e,t],n])=>{const r=p+1;p=r;const[o,a]=le(e,t),l=new Blob([`${o};((AudioWorkletProcessor,registerProcessor)=>{${a}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${r}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),c=URL.createObjectURL(l);return w.audioWorklet.addModule(c,v).then((()=>{if(i(w))return w;const e=s(w);return e.audioWorklet.addModule(c,v).then((()=>e))})).then((e=>{if(null===u)throw new SyntaxError;try{new u(e,`__sac${r}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(c)))}));return void 0===y?l.set(h,new Map([[m,b]])):y.set(m,b),b.then((()=>{const e=c.get(h);void 0===e?c.set(h,new Set([m])):e.add(m)})).finally((()=>{const e=l.get(h);void 0!==e&&e.delete(m)})),b}})(Mt,mt,(e=>t=>new Promise(((n,r)=>{if(null===e)return void r(new SyntaxError);const o=e.document.head;if(null===o)r(new SyntaxError);else{const a=e.document.createElement("script"),s=new Blob([t],{type:"application/javascript"}),i=URL.createObjectURL(s),u=e.onerror,l=()=>{e.onerror=u,URL.revokeObjectURL(i)};e.onerror=(t,n,o,a,s)=>n===i||n===e.location.href&&1===o&&1===a?(l(),r(s),!1):null!==u?u(t,n,o,a,s):void 0,a.onerror=()=>{l(),r(new SyntaxError)},a.onload=()=>{l(),n()},a.src=i,a.type="module",o.appendChild(a)}})))(Ot),yn,(e=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw e()})((()=>new DOMException("","AbortError"))),kt,bn,Lt,Dt,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),o=URL.createObjectURL(n);let a=!1,s=!1;try{await r.audioWorklet.addModule(o);const t=new e(r,"a",{numberOfOutputs:0}),n=r.createOscillator();t.port.onmessage=()=>a=!0,t.onprocessorerror=()=>s=!0,n.connect(t),n.start(0),await r.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return a&&!s})(Dt,Rt),Ot):void 0,xn=((e,t,n,r)=>class extends e{constructor(e,o){const a=n(e),s=t(a,o);if(r(a))throw new TypeError;super(e,!0,s,null),this._nativeMediaStreamAudioSourceNode=s}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Ft,((e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort(((e,t)=>e.id<t.id?-1:e.id>t.id?1:0));const r=n.slice(0,1),o=e.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:t}),o}),kt,Lt),En=(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(mn),Cn=(e=>(t,n)=>{e(t).add(n)})(En),Mn=(e=>(t,n,r=0,o=0)=>{const a=t[r];if(void 0===a)throw e();return He(n)?a.connect(n,0,o):a.connect(n,0)})(xe),An=(e=>(t,n)=>{e(t).delete(n)})(En),Tn=(e=>(t,n,r,o=0)=>void 0===n?t.forEach((e=>e.disconnect())):"number"==typeof n?nt(e,t,n).disconnect():He(n)?void 0===r?t.forEach((e=>e.disconnect(n))):void 0===o?nt(e,t,r).disconnect(n,0):nt(e,t,r).disconnect(n,0,o):void 0===r?t.forEach((e=>e.disconnect(n))):nt(e,t,r).disconnect(n,0))(xe),On=new WeakMap,Sn=((e,t)=>n=>t(e,n))(On,fe),In=((e,t,n,r,o,a,s,i,u,l,c,d,f)=>(p,h,m,v)=>{if(0===v.numberOfInputs&&0===v.numberOfOutputs)throw u();const g=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(g.some((e=>e<1)))throw u();if(g.length!==v.numberOfOutputs)throw t();if("explicit"!==v.channelCountMode)throw u();const y=v.channelCount*v.numberOfInputs,w=g.reduce(((e,t)=>e+t),0),b=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(y+b>6||w>6)throw u();const _=new MessageChannel,x=[],E=[];for(let e=0;e<v.numberOfInputs;e+=1)x.push(s(p,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),E.push(o(p,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const C=[];if(void 0!==m.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:r}of m.parameterDescriptors){const o=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==v.parameterData[r]?v.parameterData[r]:void 0===e?0:e});Object.defineProperties(o.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?34028234663852886e22:t},minValue:{get:()=>void 0===n?-34028234663852886e22:n}}),C.push(o)}const M=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+b)}),A=((e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))))(h,p.sampleRate),T=i(p,A,y+b,Math.max(1,w)),O=o(p,{channelCount:Math.max(1,w),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,w)}),S=[];for(let e=0;e<v.numberOfOutputs;e+=1)S.push(r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:g[e]}));for(let e=0;e<v.numberOfInputs;e+=1){x[e].connect(E[e]);for(let t=0;t<v.channelCount;t+=1)E[e].connect(M,t,e*v.channelCount+t)}const I=new Ze(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map((({name:e},t)=>{const n=C[t];return n.connect(M,0,y+t),n.start(0),[e,n.offset]})));M.connect(T);let k=v.channelInterpretation,U=null;const R=0===v.numberOfOutputs?[T]:S,L={get bufferSize(){return A},get channelCount(){return v.channelCount},set channelCount(e){throw n()},get channelCountMode(){return v.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return k},set channelInterpretation(e){for(const t of x)t.channelInterpretation=e;k=e},get context(){return T.context},get inputs(){return x},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return U},set onprocessorerror(e){"function"==typeof U&&L.removeEventListener("processorerror",U),U="function"==typeof e?e:null,"function"==typeof U&&L.addEventListener("processorerror",U)},get parameters(){return I},get port(){return _.port2},addEventListener:(...e)=>T.addEventListener(e[0],e[1],e[2]),connect:e.bind(null,R),disconnect:l.bind(null,R),dispatchEvent:(...e)=>T.dispatchEvent(e[0]),removeEventListener:(...e)=>T.removeEventListener(e[0],e[1],e[2])},B=new Map;var N,V;_.port1.addEventListener=(N=_.port1.addEventListener,(...e)=>{if("message"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=B.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{c(p.currentTime,p.sampleRate,(()=>t(e)))},B.set(t,e[1]))}}return N.call(_.port1,e[0],e[1],e[2])}),_.port1.removeEventListener=(V=_.port1.removeEventListener,(...e)=>{if("message"===e[0]){const t=B.get(e[1]);void 0!==t&&(B.delete(e[1]),e[1]=t)}return V.call(_.port1,e[0],e[1],e[2])});let P=null;Object.defineProperty(_.port1,"onmessage",{get:()=>P,set:e=>{"function"==typeof P&&_.port1.removeEventListener("message",P),P="function"==typeof e?e:null,"function"==typeof P&&(_.port1.addEventListener("message",P),_.port1.start())}}),m.prototype.port=_.port1;let j=null;const W=((e,t,n,r)=>{let o=se.get(e);void 0===o&&(o=new WeakMap,se.set(e,o));const a=ct(n,r);return o.set(t,a),a})(p,L,m,v);W.then((e=>j=e));const D=et(v.numberOfInputs,v.channelCount),F=et(v.numberOfOutputs,g),$=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce(((e,{name:t})=>({...e,[t]:new Float32Array(128)})),{});let z=!0;const q=()=>{v.numberOfOutputs>0&&T.disconnect(O);for(let e=0,t=0;e<v.numberOfOutputs;e+=1){const n=S[e];for(let r=0;r<g[e];r+=1)O.disconnect(n,t+r,r);t+=g[e]}},H=new Map;T.onaudioprocess=({inputBuffer:e,outputBuffer:t})=>{if(null!==j){const n=d(L);for(let r=0;r<A;r+=128){for(let t=0;t<v.numberOfInputs;t+=1)for(let n=0;n<v.channelCount;n+=1)Qe(e,D[t],n,n,r);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach((({name:t},n)=>{Qe(e,$,t,y+n,r)}));for(let e=0;e<v.numberOfInputs;e+=1)for(let t=0;t<g[e];t+=1)0===F[e][t].byteLength&&(F[e][t]=new Float32Array(128));try{const e=D.map(((e,t)=>{if(n[t].size>0)return H.set(t,A/128),e;const r=H.get(t);return void 0===r?[]:(e.every((e=>e.every((e=>0===e))))&&(1===r?H.delete(t):H.set(t,r-1)),e)})),o=c(p.currentTime+r/p.sampleRate,p.sampleRate,(()=>j.process(e,F,$)));z=o;for(let e=0,n=0;e<v.numberOfOutputs;e+=1){for(let o=0;o<g[e];o+=1)Je(t,F[e],o,n+o,r);n+=g[e]}}catch(e){z=!1,L.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}))}if(!z){for(let e=0;e<v.numberOfInputs;e+=1){x[e].disconnect(E[e]);for(let t=0;t<v.channelCount;t+=1)E[r].disconnect(M,t,e*v.channelCount+t)}if(void 0!==m.parameterDescriptors){const e=m.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=C[t];e.disconnect(M,0,y+t),e.stop()}}M.disconnect(T),T.onaudioprocess=null,X?q():Z();break}}}};let X=!1;const Y=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),G=()=>T.connect(Y).connect(p.destination),Z=()=>{T.disconnect(Y),Y.disconnect()};return G(),f(L,(()=>{if(z){Z(),v.numberOfOutputs>0&&T.connect(O);for(let e=0,t=0;e<v.numberOfOutputs;e+=1){const n=S[e];for(let r=0;r<g[e];r+=1)O.connect(n,t+r,r);t+=g[e]}}X=!0}),(()=>{z&&(G(),q()),X=!1}))})(Mn,xe,rt,cn,dt,fn,pt,ht,mt,Tn,yn,Sn,un),kn=((e,t,n,r,o)=>(a,s,i,u,l,c)=>{if(null!==i)try{const t=new i(a,u,c),r=new Map;let s=null;if(Object.defineProperties(t,{channelCount:{get:()=>c.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>s,set:e=>{"function"==typeof s&&t.removeEventListener("processorerror",s),s="function"==typeof e?e:null,"function"==typeof s&&t.addEventListener("processorerror",s)}}}),t.addEventListener=(f=t.addEventListener,(...e)=>{if("processorerror"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=r.get(e[1]);void 0!==n?e[1]=n:(e[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),t(n)):t(new ErrorEvent(e[0],{...n}))},r.set(t,e[1]))}}return f.call(t,"error",e[1],e[2]),f.call(t,...e)}),t.removeEventListener=(d=t.removeEventListener,(...e)=>{if("processorerror"===e[0]){const t=r.get(e[1]);void 0!==t&&(r.delete(e[1]),e[1]=t)}return d.call(t,"error",e[1],e[2]),d.call(t,e[0],e[1],e[2])}),0!==c.numberOfOutputs){const e=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(e).connect(a.destination);return o(t,(()=>e.disconnect()),(()=>e.connect(a.destination)))}return t}catch(e){if(11===e.code)throw r();throw e}var d,f;if(void 0===l)throw r();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(c),t(a,s,l,c)})(rt,In,pt,mt,un),Un=((e,t,n,r,o,a,s,i,u,l,c,d,f,p,h,m)=>(v,g,y)=>{const w=new WeakMap;let b=null;return{render(_,x){i(x,_);const E=w.get(x);return void 0!==E?Promise.resolve(E):(async(i,_)=>{let x=c(i),E=null;const C=be(x,_),M=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(null===d){const e=M.reduce(((e,t)=>e+t),0),n=o(_,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),a=[];for(let e=0;e<i.numberOfOutputs;e+=1)a.push(r(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:M[e]}));const l=s(_,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});l.connect=t.bind(null,a),l.disconnect=u.bind(null,a),E=[n,a,l]}else C||(x=new d(_,v));if(w.set(_,null===E?x:E[2]),null!==E){if(null===b){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===f)throw new Error("Missing the native OfflineAudioContext constructor.");const e=i.channelCount*i.numberOfInputs,t=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=e+t,u=async()=>{const u=new f(n,128*Math.ceil(i.context.length/128),_.sampleRate),l=[],c=[];for(let e=0;e<g.numberOfInputs;e+=1)l.push(s(u,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),c.push(o(u,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const d=await Promise.all(Array.from(i.parameters.values()).map((async e=>{const t=a(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await p(u,e,t.offset),t}))),v=r(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<g.numberOfInputs;e+=1){l[e].connect(c[e]);for(let t=0;t<g.channelCount;t+=1)c[e].connect(v,t,e*g.channelCount+t)}for(const[t,n]of d.entries())n.connect(v,0,e+t),n.start(0);return v.connect(u.destination),await Promise.all(l.map((e=>h(i,u,e)))),m(u)};b=tt(i,0===n?null:await u(),_,g,M,y,l)}const e=await b,t=n(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[u,c,d]=E;null!==e&&(t.buffer=e,t.start(0)),t.connect(u);for(let e=0,t=0;e<i.numberOfOutputs;e+=1){const n=c[e];for(let r=0;r<M[e];r+=1)u.connect(n,t+r,r);t+=M[e]}return d}if(C)for(const[t,n]of i.parameters.entries())await e(_,n,x.parameters.get(t));else for(const[e,t]of i.parameters.entries())await p(_,t,x.parameters.get(e));return await h(i,_,x),x})(_,x)}}})(Jt,Mn,en,cn,dt,fn,pt,An,Tn,yn,We,Dt,Rt,tn,It,pn),Rn=(e=>t=>e.get(t))(wn),Ln=(e=>(t,n)=>{e.set(t,n)})(On),Bn=gn?((e,t,n,r,o,a,s,i,u,l,c,d,f,p)=>class extends t{constructor(t,p,h){var m;const v=i(t),g=u(v),y=c({...Ke,...h});f(y);const w=ae.get(v),b=null==w?void 0:w.get(p),_=g||"closed"!==v.state?v:null!==(m=s(v))&&void 0!==m?m:v,x=o(_,g?null:t.baseLatency,l,p,b,y);super(t,!0,x,g?r(p,y,b):null);const E=[];x.parameters.forEach(((e,t)=>{const r=n(this,g,e);E.push([t,r])})),this._nativeAudioWorkletNode=x,this._onprocessorerror=null,this._parameters=new Ze(E),g&&e(v,this);const{activeInputs:C}=a(this);d(x,C)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"==typeof e?p(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(Cn,Ft,rn,Un,kn,Ae,Rn,kt,Lt,Dt,(e=>({...e,outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},(()=>1))})),Ln,(e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}}),bt):void 0,Nn=((e,t,n,r,o)=>class extends r{constructor(e={}){if(null===o)throw new Error("Missing the native AudioContext constructor.");let r;try{r=new o(e)}catch(e){if(12===e.code&&"sampleRate is not in range"===e.message)throw t();throw e}if(null===r)throw n();if(!(e=>void 0===e||"number"==typeof e||"string"==typeof e&&("balanced"===e||"interactive"===e||"playback"===e))(e.latencyHint))throw new TypeError(`The provided value '${e.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==e.sampleRate&&r.sampleRate!==e.sampleRate)throw t();super(r,2);const{latencyHint:a}=e,{sampleRate:s}=r;if(this._baseLatency="number"==typeof r.baseLatency?r.baseLatency:"balanced"===a?512/s:"interactive"===a||void 0===a?256/s:"playback"===a?1024/s:128*Math.max(2,Math.min(128,Math.round(a*s/128)))/s,this._nativeAudioContext=r,"webkitAudioContext"===o.name?(this._nativeGainNode=r.createGain(),this._nativeOscillatorNode=r.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(r.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===r.state){this._state="suspended";const e=()=>{"suspended"===this._state&&(this._state=null),r.removeEventListener("statechange",e)};r.addEventListener("statechange",e)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Oe(this.destination,[])})))}resume(){return"suspended"===this._state?new Promise(((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(rt,mt,(()=>new DOMException("","UnknownError")),vn,Vt),Vn="Missing AudioWorklet support. Maybe this is not running in a secure context.";var Pn={exports:{}};!function(e,t,n,r){function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(t),s=o(n),i=o(r);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(s.default(this,e),n<0||void 0!==r&&r<0)throw new RangeError;var o=t.reduce((function(e,t){return e+t.byteLength}),0);if(n>o||void 0!==r&&n+r>o)throw new RangeError;var a,i=[],l=void 0===r?o-n:r,c=[],d=0,f=n,p=u(t);try{for(p.s();!(a=p.n()).done;){var h=a.value;if(0===c.length)if(h.byteLength>f){var m=(d=h.byteLength-f)>l?l:d;i.push(new DataView(h,f,m)),c.push(h)}else f-=h.byteLength;else if(d<l){var v=(d+=h.byteLength)>l?h.byteLength-d+l:h.byteLength;i.push(new DataView(h,0,v)),c.push(h)}}}catch(e){p.e(e)}finally{p.f()}this._buffers=c,this._byteLength=l,this._byteOffset=f,this._dataViews=i,this._internalBuffer=new DataView(new ArrayBuffer(8))}return i.default(e,[{key:"buffers",get:function(){return this._buffers}},{key:"byteLength",get:function(){return this._byteLength}},{key:"byteOffset",get:function(){return this._byteOffset}},{key:"getFloat32",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.setUint8(2,this.getUint8(e+2)),this._internalBuffer.setUint8(3,this.getUint8(e+3)),this._internalBuffer.getFloat32(0,t)}},{key:"getFloat64",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.setUint8(2,this.getUint8(e+2)),this._internalBuffer.setUint8(3,this.getUint8(e+3)),this._internalBuffer.setUint8(4,this.getUint8(e+4)),this._internalBuffer.setUint8(5,this.getUint8(e+5)),this._internalBuffer.setUint8(6,this.getUint8(e+6)),this._internalBuffer.setUint8(7,this.getUint8(e+7)),this._internalBuffer.getFloat64(0,t)}},{key:"getInt16",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.getInt16(0,t)}},{key:"getInt32",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.setUint8(2,this.getUint8(e+2)),this._internalBuffer.setUint8(3,this.getUint8(e+3)),this._internalBuffer.getInt32(0,t)}},{key:"getInt8",value:function(e){var t=this._findDataViewWithOffset(e),n=a.default(t,2),r=n[0],o=n[1];return r.getInt8(e-o)}},{key:"getUint16",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.getUint16(0,t)}},{key:"getUint32",value:function(e,t){return this._internalBuffer.setUint8(0,this.getUint8(e+0)),this._internalBuffer.setUint8(1,this.getUint8(e+1)),this._internalBuffer.setUint8(2,this.getUint8(e+2)),this._internalBuffer.setUint8(3,this.getUint8(e+3)),this._internalBuffer.getUint32(0,t)}},{key:"getUint8",value:function(e){var t=this._findDataViewWithOffset(e),n=a.default(t,2),r=n[0],o=n[1];return r.getUint8(e-o)}},{key:"setFloat32",value:function(e,t,n){this._internalBuffer.setFloat32(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1)),this.setUint8(e+2,this._internalBuffer.getUint8(2)),this.setUint8(e+3,this._internalBuffer.getUint8(3))}},{key:"setFloat64",value:function(e,t,n){this._internalBuffer.setFloat64(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1)),this.setUint8(e+2,this._internalBuffer.getUint8(2)),this.setUint8(e+3,this._internalBuffer.getUint8(3)),this.setUint8(e+4,this._internalBuffer.getUint8(4)),this.setUint8(e+5,this._internalBuffer.getUint8(5)),this.setUint8(e+6,this._internalBuffer.getUint8(6)),this.setUint8(e+7,this._internalBuffer.getUint8(7))}},{key:"setInt16",value:function(e,t,n){this._internalBuffer.setInt16(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1))}},{key:"setInt32",value:function(e,t,n){this._internalBuffer.setInt32(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1)),this.setUint8(e+2,this._internalBuffer.getUint8(2)),this.setUint8(e+3,this._internalBuffer.getUint8(3))}},{key:"setInt8",value:function(e,t){var n=this._findDataViewWithOffset(e),r=a.default(n,2),o=r[0],s=r[1];o.setInt8(e-s,t)}},{key:"setUint16",value:function(e,t,n){this._internalBuffer.setUint16(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1))}},{key:"setUint32",value:function(e,t,n){this._internalBuffer.setUint32(0,t,n),this.setUint8(e,this._internalBuffer.getUint8(0)),this.setUint8(e+1,this._internalBuffer.getUint8(1)),this.setUint8(e+2,this._internalBuffer.getUint8(2)),this.setUint8(e+3,this._internalBuffer.getUint8(3))}},{key:"setUint8",value:function(e,t){var n=this._findDataViewWithOffset(e),r=a.default(n,2),o=r[0],s=r[1];o.setUint8(e-s,t)}},{key:"_findDataViewWithOffset",value:function(e){var t,n=0,r=u(this._dataViews);try{for(r.s();!(t=r.n()).done;){var o=t.value,a=n+o.byteLength;if(e>=n&&e<a)return[o,n];n=a}}catch(e){r.e(e)}finally{r.f()}throw new RangeError}}]),e}();e.MultiBufferDataView=d,Object.defineProperty(e,"__esModule",{value:!0})}(Pn.exports,q.exports,G.exports,Z.exports);const jn=Symbol.observable||"@@observable";const Wn=()=>{},Dn=e=>{throw e};const Fn=((e,t)=>{const n=()=>{};return r=>{const o=(...e)=>{const o=r((e=>"function"==typeof e[0])(e)?t({next:e[0]}):t(...e));return void 0!==o?o:n};return o[Symbol.observable]=()=>({subscribe:(...e)=>({unsubscribe:o(...e)})}),e(o)}})((function(e){return Symbol.observable||("function"==typeof e&&e.prototype&&e.prototype[Symbol.observable]?(e.prototype[jn]=e.prototype[Symbol.observable],delete e.prototype[Symbol.observable]):(e[jn]=e[Symbol.observable],delete e[Symbol.observable])),e}),(function(e){return e?e.next&&e.error&&e.complete?e:{complete:(e.complete??Wn).bind(e),error:(e.error??Dn).bind(e),next:(e.next??Wn).bind(e)}:{complete:Wn,error:Dn,next:Wn}})),$n=(e=>(t,n,r)=>e((e=>{const o=t=>e.next(t);return t.addEventListener(n,o,r),()=>t.removeEventListener(n,o,r)})))(Fn),zn=(e,t)=>{if(t>=e.byteLength)return null;const n=e.getUint8(t);if(n>127)return 1;if(n>63)return 2;if(n>31)return 3;if(n>15)return 4;if(n>7)return 5;if(n>3)return 6;if(n>1)return 7;if(n>0)return 8;const r=zn(e,t+1);return null===r?null:r+8},qn=[],Hn="undefined"==typeof window?null:window,Xn=(e=>(t,n)=>{if(null===e){const{data:e,...r}=n,o=new Event(t,r);return o.data=e,o}return new e(t,n)})((e=>null!==e&&void 0!==e.BlobEvent?e.BlobEvent:null)(Hn)),Yn=((e,t,n,r)=>(o,a,s)=>{var i;const u=null===(i=a.getAudioTracks()[0])||void 0===i?void 0:i.getSettings().sampleRate,l=new Nn({latencyHint:"playback",sampleRate:u}),c=Math.max(1024,Math.ceil(l.baseLatency*l.sampleRate)),d=new Zt({length:c,sampleRate:l.sampleRate}),f=[],p=F((e=>{if(void 0===_n)throw new Error(Vn);return _n(l,e)}));let h=null,m=null,v=null,g=null,y=!0;const _=t=>{o.dispatchEvent(e("dataavailable",{data:new Blob(t,{type:s})}))},x=async(e,t)=>{const n=await w(e,t);null===v?f.push(...n):(_(n),g=x(e,t))},E=()=>(y=!0,l.resume()),C=()=>{null!==v&&(null!==h&&(a.removeEventListener("addtrack",h),a.removeEventListener("removetrack",h)),null!==m&&clearTimeout(m),v.then((async({encoderId:e,mediaStreamAudioSourceNode:t,recorderAudioWorkletNode:n})=>{null!==g&&(g.catch((()=>{})),g=null),await n.stop(),t.disconnect(n);const r=await w(e,null);null===v&&await M(),_([...f,...r]),f.length=0,o.dispatchEvent(new Event("stop"))})),v=null)},M=()=>(y=!1,l.suspend());return M(),{get mimeType(){return s},get state(){return null===v?"inactive":y?"recording":"paused"},pause(){if(null===v)throw n();y&&(M(),o.dispatchEvent(new Event("pause")))},resume(){if(null===v)throw n();y||(E(),o.dispatchEvent(new Event("resume")))},start(e){var i;if(null!==v)throw n();if(a.getVideoTracks().length>0)throw r();const u=a.getAudioTracks(),f=0===u.length?2:null!==(i=u[0].getSettings().channelCount)&&void 0!==i?i:2;v=Promise.all([E(),p.then((()=>(async(e,t,n,r,o)=>{const{encoderId:a,port:s}=await b(o,t.sampleRate);if(void 0===Bn)throw new Error(Vn);return{audioBufferSourceNode:new an(t,{buffer:e}),encoderId:a,mediaStreamAudioSourceNode:new xn(t,{mediaStream:r}),port:s,recorderAudioWorkletNode:$(Bn,t,{channelCount:n})}})(d,l,f,a,s)))]).then((async([,{audioBufferSourceNode:t,encoderId:n,mediaStreamAudioSourceNode:r,port:o,recorderAudioWorkletNode:a}])=>(r.connect(a),await new Promise((e=>{t.onended=e,t.connect(a),t.start(l.currentTime+c/l.sampleRate)})),t.disconnect(a),await a.record(o),void 0!==e&&(g=x(n,e)),{encoderId:n,mediaStreamAudioSourceNode:r,recorderAudioWorkletNode:a})));const y=a.getTracks();h=()=>{C(),o.dispatchEvent(new ErrorEvent("error",{error:t()}))},a.addEventListener("addtrack",h),a.addEventListener("removetrack",h),m=setInterval((()=>{const e=a.getTracks();e.length===y.length&&!e.some(((e,t)=>e!==y[t]))||null===h||h()}),1e3)},stop:C}})(Xn,x,(()=>{try{return new DOMException("","InvalidStateError")}catch(e){return e.code=11,e.name="InvalidStateError",e}}),E),Gn=(e=>(t,n)=>{const r=e(t,n);if(null===r)return r;const o=n+Math.floor((r-1)/8);if(o+r>t.byteLength)return null;let a=t.getUint8(o)&(1<<8-r%8)-1;for(let e=1;e<r;e+=1)a=(a<<8)+t.getUint8(o+e);return{length:r,value:a}})(zn),Zn=(e=>(t,n,r,o=2)=>{const a=e(t,n);if(null===a)return a;const{length:s,value:i}=a;if("master"===r)return{content:null,length:s};if(n+s+i>t.byteLength)return null;if("binary"===r){const e=(i/Float32Array.BYTES_PER_ELEMENT-1)/o,r=Array.from({length:o},(()=>new Float32Array(e)));for(let a=0;a<e;a+=1){const e=a*o+1;for(let i=0;i<o;i+=1)r[i][a]=t.getFloat32(n+s+(e+i)*Float32Array.BYTES_PER_ELEMENT,!0)}return{content:r,length:s+i}}return{content:null,length:s+i}})(Gn),Kn=(e=>(t,n)=>{const r=e(t,n);if(null===r)return r;const{length:o,value:a}=r;return 35===a?{length:o,type:"binary"}:46===a||97===a||88713574===a||106212971===a||139690087===a||172351395===a||256095861===a?{length:o,type:"master"}:{length:o,type:"unknown"}})(Gn),Qn=((e,t)=>(n,r,o)=>{const a=[];let s=r,i=0;for(;i<n.byteLength;)if(null===s){const e=t(n,i);if(null===e)break;const{length:r,type:o}=e;s=o,i+=r}else{const t=e(n,i,s,o);if(null===t)break;const{content:r,length:u}=t;s=null,i+=u,null!==r&&a.push(r)}return{contents:a,currentElementType:s,offset:i}})(Zn,Kn),Jn=((e,t,n,r,o)=>(a,s,i,u)=>{const l=i.getAudioTracks(),c=[],d=0===l.length?void 0:l[0].getSettings().channelCount,f=new s(i,{mimeType:"audio/webm;codecs=pcm"}),p=0===l.length?void 0:l[0].getSettings().sampleRate;let h=null,m=()=>{};const v=t=>{a.dispatchEvent(e("dataavailable",{data:new Blob(t,{type:u})}))},g=async(e,t)=>{const n=await w(e,t);"inactive"===f.state?c.push(...n):(v(n),h=g(e,t))},y=()=>{"inactive"!==f.state&&(null!==h&&(h.catch((()=>{})),h=null),m(),m=()=>{},f.stop())};return f.addEventListener("error",(()=>{y(),a.dispatchEvent(new ErrorEvent("error",{error:t()}))})),{get mimeType(){return u},get state(){return f.state},pause:()=>f.pause(),resume:()=>f.resume(),start(e){if(i.getVideoTracks().length>0)throw n();if("inactive"===f.state){if(void 0===p)throw new Error("The sampleRate is not defined.");let t=!1,n=!1,s=0,i=b(u,p);m=()=>{n=!0};const l=$n(f,"dataavailable")((({data:e})=>{s+=1,i=i.then((async({dataView:i=null,elementType:u=null,encoderId:p,port:h})=>{const m=await e.arrayBuffer();s-=1;const g=null===i?new Pn.exports.MultiBufferDataView([m]):new Pn.exports.MultiBufferDataView([...i.buffers,m],i.byteOffset);if(!t&&"recording"===f.state&&!n){const e=o(g,0);if(null===e)return{dataView:g,elementType:u,encoderId:p,port:h};const{value:n}=e;if(172351395!==n)return{dataView:i,elementType:u,encoderId:p,port:h};t=!0}const{currentElementType:y,offset:b,contents:_}=r(g,u,d),x=b<g.byteLength?new Pn.exports.MultiBufferDataView(g.buffers,g.byteOffset+b):null;return _.forEach((e=>h.postMessage(e,e.map((({buffer:e})=>e))))),0!==s||"inactive"!==f.state&&!n||(w(p,null).then((e=>{v([...c,...e]),c.length=0,a.dispatchEvent(new Event("stop"))})),h.postMessage([]),h.close(),l()),{dataView:x,elementType:y,encoderId:p,port:h}}))}));void 0!==e&&i.then((({encoderId:t})=>h=g(t,e)))}f.start(100)},stop:y}})(Xn,x,E,Qn,Gn),er=(e=>()=>{if(null===e)throw new Error("A native EventTarget could not be created.");return e.document.createElement("p")})(Hn),tr=(e=>null===e||void 0===e.MediaRecorder?null:e.MediaRecorder)(Hn),nr=((e,t)=>(n,r,o)=>{const a=[],s=new WeakMap,i=new WeakMap,u=new n(r,o),l=new WeakMap;let c=!0;var d,f,p,h;return u.addEventListener=(d=u.addEventListener,(t,n,r)=>{let o=n;return"function"==typeof n&&("dataavailable"===t?(o=e=>{setTimeout((()=>{if(c&&"inactive"===u.state)a.push(e.data);else{if(a.length>0){const t=e.data;Object.defineProperty(e,"data",{value:new Blob([...a,t],{type:t.type})}),a.length=0}n.call(u,e)}}))},s.set(n,o)):"error"===t?(o=t=>{if(void 0===t.error)n.call(u,new ErrorEvent("error",{error:e()}));else if("UnknownError"===t.error.name){const r=t.error.message;n.call(u,new ErrorEvent("error",{error:e(r)}))}else t instanceof ErrorEvent?n.call(u,t):n.call(u,new ErrorEvent("error",{error:t.error}))},i.set(n,o)):"stop"===t&&(o=e=>{c=!1,setTimeout((()=>n.call(u,e)))},l.set(n,o))),d.call(u,t,o,r)}),u.dispatchEvent=(f=u.dispatchEvent,e=>{let t;setTimeout((()=>{t=c,c=!1}));const n=f.call(u,e);return setTimeout((()=>c=t)),n}),u.removeEventListener=(p=u.removeEventListener,(e,t,n)=>{let r=t;if("function"==typeof t)if("dataavailable"===e){const e=s.get(t);void 0!==e&&(r=e)}else if("error"===e){const e=i.get(t);void 0!==e&&(r=e)}else if("stop"===e){const e=l.get(t);void 0!==e&&(r=e)}return p.call(u,e,r,n)}),u.start=(h=u.start,e=>{if(void 0!==o.mimeType&&o.mimeType.startsWith("audio/")&&r.getVideoTracks().length>0)throw t();return c=void 0!==e,void 0===e?h.call(u):h.call(u,e)}),u})(x,E),rr=((e,t,n,r,o,a,s)=>class extends a{constructor(a,i={}){const{mimeType:u}=i;if(null!==s&&(void 0===u||void 0!==s.isTypeSupported&&s.isTypeSupported(u))){const t=e(s,a,i);super(t),this._internalMediaRecorder=t}else{if(void 0===u||!o.some((e=>e.test(u))))throw null!==s&&e(s,a,i),t();super(),null!==s&&void 0!==s.isTypeSupported&&s.isTypeSupported("audio/webm;codecs=pcm")?this._internalMediaRecorder=r(this,s,a,u):this._internalMediaRecorder=n(this,a,u)}this._ondataavailable=null,this._onerror=null,this._onpause=null,this._onresume=null,this._onstop=null}get mimeType(){return this._internalMediaRecorder.mimeType}get ondataavailable(){return null===this._ondataavailable?this._ondataavailable:this._ondataavailable[0]}set ondataavailable(e){if(null!==this._ondataavailable&&this.removeEventListener("dataavailable",this._ondataavailable[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("dataavailable",t),this._ondataavailable=[e,t]}else this._ondataavailable=null}get onerror(){return null===this._onerror?this._onerror:this._onerror[0]}set onerror(e){if(null!==this._onerror&&this.removeEventListener("error",this._onerror[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("error",t),this._onerror=[e,t]}else this._onerror=null}get onpause(){return null===this._onpause?this._onpause:this._onpause[0]}set onpause(e){if(null!==this._onpause&&this.removeEventListener("pause",this._onpause[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("pause",t),this._onpause=[e,t]}else this._onpause=null}get onresume(){return null===this._onresume?this._onresume:this._onresume[0]}set onresume(e){if(null!==this._onresume&&this.removeEventListener("resume",this._onresume[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("resume",t),this._onresume=[e,t]}else this._onresume=null}get onstop(){return null===this._onstop?this._onstop:this._onstop[0]}set onstop(e){if(null!==this._onstop&&this.removeEventListener("stop",this._onstop[1]),"function"==typeof e){const t=e.bind(this);this.addEventListener("stop",t),this._onstop=[e,t]}else this._onstop=null}get state(){return this._internalMediaRecorder.state}pause(){return this._internalMediaRecorder.pause()}resume(){return this._internalMediaRecorder.resume()}start(e){return this._internalMediaRecorder.start(e)}stop(){return this._internalMediaRecorder.stop()}static isTypeSupported(e){return null!==s&&void 0!==s.isTypeSupported&&s.isTypeSupported(e)||o.some((t=>t.test(e)))}})(nr,E,Yn,Jn,qn,((e,t)=>class{constructor(t=null){this._listeners=new WeakMap,this._nativeEventTarget=null===t?e():t}addEventListener(e,n,r){if(null!==n){let o=this._listeners.get(n);void 0===o&&(o=t(this,n),"function"==typeof n&&this._listeners.set(n,o)),this._nativeEventTarget.addEventListener(e,o,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}})(er,((e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof t?t.call(e,n):t.handleEvent.call(e,n)})),tr),or=()=>(e=>null===e||void 0===e.MediaStream||void 0!==e.MediaRecorder&&void 0===e.MediaRecorder.isTypeSupported?Promise.resolve(!1):new Promise((t=>{if(void 0===e.MediaRecorder)return t(!0);const n=document.createElement("canvas");if(n.getContext("2d"),"function"!=typeof n.captureStream)return t(!1);const r=n.captureStream(),o="audio/webm";try{const n=new e.MediaRecorder(r,{mimeType:o});n.addEventListener("dataavailable",(({data:e})=>t(e.type===o))),n.start(),setTimeout((()=>n.stop()),10)}catch(e){t("NotSupportedError"===e.name)}})))(Hn),ar=async e=>{qn.push(await _(e))};export{rr as MediaRecorder,or as isSupported,ar as register};
